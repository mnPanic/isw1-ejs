

----QUIT----(13 October 2021 15:20:10) CuisUniversity-4913.image priorSource: 14638157!

----STARTUP---- (13 October 2021 15:20:10) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4913.image!


----QUIT----(13 October 2021 15:20:10) CuisUniversity-4913.image priorSource: 18661767!

----STARTUP---- (13 October 2021 15:21:02) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4913.image!


----QUIT----(13 October 2021 15:21:02) CuisUniversity-4913.image priorSource: 18661997!

----QUIT----(13 October 2021 15:26:07) CuisUniversity-4913.image priorSource: 14638157!

----STARTUP---- (13 October 2021 15:26:08) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4913.image!


----QUIT----(13 October 2021 15:26:08) CuisUniversity-4913.image priorSource: 18661767!

----STARTUP---- (28 October 2021 16:20:21) as /home/agus/Documents/inge1/linux64/CuisUniversity-4913.image!


----End fileIn of /home/agus/Documents/inge1/isw1-ejs/19-MarsRover-ElRegreso/MarsRover-WithHeading.st----!

Object subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

!classDefinition: #CartTest category: 'TusLibros-It1' stamp: 'AF 10/28/2021 21:01:23'!
Object subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

!classDefinition: #CartTest category: 'TusLibros-It1' stamp: 'AF 10/28/2021 21:01:53'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

!classDefinition: #Cart category: 'TusLibros-It1' stamp: 'AF 10/28/2021 21:03:04'!
Object subclass: #Cart
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!CartTest methodsFor: 'nil' stamp: 'AF 10/28/2021 21:02:51'!
test01

	| cart |
	cart _ Cart new.
	self assert: cart isEmpty.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:03:40'!
ERROR!
!Cart methodsFor: 'as yet unclasifed' stamp: 'AF 10/28/2021 21:03:53'!
isEmpty
	self shouldBeImplemented.! !
!Cart methodsFor: 'as yet unclasifed' stamp: 'AF 10/28/2021 21:03:59' prior: 50915920!
isEmpty
	^true.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:01'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:01'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:34'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:34'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:36'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:36'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:36'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:36'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:37'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:04:38'!
PASSED!
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:06:56'!
test02

	| cart |
	cart _ Cart new.
	cart addBook: 'growing object-oriented software guided by tests'.
	self deny: cart isEmpty ! !

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:07:02'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:07:07'!
addBook: aString 
	self shouldBeImplemented.! !

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:08:15'!
ERROR!

!classDefinition: #Cart category: 'TusLibros-It1' stamp: 'AF 10/28/2021 21:08:59'!
Object subclass: #Cart
	instanceVariableNames: 'contents'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:08:56' prior: 50915985!
addBook: aBook

	contents add: aBook.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:09:02'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:09:02'!
ERROR!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:09:02'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:09:33' overrides: 16896425!
initialize

	contents _ OrderedCollection new.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:09:33'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:09:33'!
FAILURE!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:09:33'!
FAILURE!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:09:53' prior: 50915924!
isEmpty
	
	^contents isEmpty.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:09:56'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:09:56'!
PASSED!
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:11:09'!
test03

	| cart aBook |
	cart _ Cart new.
	aBook _ 'growing object-oriented software guided by tests'.
	cart addBook: aBook.
	self assert: (cart contains: aBook).! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:11:42'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:11:42'!
PASSED!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:11:42'!
ERROR!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:11:42'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:11:48'!
contains: aString 
	self shouldBeImplemented.! !

----End fileIn of /home/agus/Documents/inge1/linux64/Packages/TerseGuide.pck.st----!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:12:41' prior: 50916046!
contains: aBook 
	
	contents contains: aBook.! !

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:12:42'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:12:50' prior: 50918976!
contains: aBook 
	
	contents includes: aBook.! !

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:12:52'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:13:24' prior: 50918983!
contains: aBook 
	
	^contents includes: aBook.! !

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:13:25'!
PASSED!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:13:47'!
includes: aBook 
	
	^contents includes: aBook.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:13:47' prior: 50916029!
test03

	| cart aBook |
	cart _ Cart new.
	aBook _ 'growing object-oriented software guided by tests'.
	cart addBook: aBook.
	self assert: (cart includes: aBook).! !

!methodRemoval: Cart #contains: stamp: 'AF 10/28/2021 21:13:47'!
contains: aBook 
	
	^contents includes: aBook.!
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:19:15'!
test04

	| cart aBook aCatalog |
	aCatalog _ OrderedCollection new.
	cart _ Cart with: aCatalog.
	aBook _ 'growing object-oriented software guided by tests'.
	cart addBook: aBook.
	self assert: (cart includes: aBook).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:24:39' prior: 50919014!
test04

	| cart aBook aCatalog |
	
	aCatalog _ OrderedCollection new.
	cart _ Cart with: aCatalog.
	aBook _ 'growing object-oriented software guided by tests'.
	
	self should: [ cart addBook: aBook ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError |
			self assert: Cart bookNotInCatalogErrorDescription equals: anError messageText.
			self deny: (cart includes: aBook) ].! !

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:24:42'!
ERROR!
!Cart class methodsFor: 'instance creation' stamp: 'AF 10/28/2021 21:24:51'!
with: anOrderedCollection 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWith: anOrderedCollection ! !
!Cart class methodsFor: 'instance creation' stamp: 'AF 10/28/2021 21:25:46' prior: 50919041!
with: aCatalog
	
	^self new initializeWith: aCatalog ! !

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:25:48'!
ERROR!

!classDefinition: #Cart category: 'TusLibros-It1' stamp: 'AF 10/28/2021 21:25:53'!
Object subclass: #Cart
	instanceVariableNames: 'contents catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cart methodsFor: 'initialization' stamp: 'AF 10/28/2021 21:25:53'!
initializeWith: aCatalog 
	self shouldBeImplemented.
	catalog := aCatalog.! !
!Cart methodsFor: 'initialization' stamp: 'AF 10/28/2021 21:26:03' prior: 50919064!
initializeWith: aCatalog 
	
	catalog _ aCatalog.! !

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:26:06'!
FAILURE!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:27:39' prior: 50915999!
addBook: aBook
	
	(catalog includes: aBook) ifFalse: [self error: self class bookNotInCatalogErrorDescription].
	contents add: aBook.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:27:44'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:27:44'!
ERROR!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:27:44'!
ERROR!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:27:44'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:27:56' prior: 50919077!
addBook: aBook
	
	(catalog includes: aBook) ifFalse: [ self error: self class bookNotInCatalogErrorDescription ].
	contents add: aBook.! !

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:27:56'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:27:56'!
ERROR!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:27:56'!
ERROR!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:27:56'!
ERROR!
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:28:54' prior: 50915976!
test02

	| cart aBook aCatalog |
	aBook _ 'growing object-oriented software guided by tests'.
	aCatalog _ OrderedCollection with:  aBook.
	cart _ Cart with: aCatalog.
	
	cart addBook: 'growing object-oriented software guided by tests'.
	self deny: cart isEmpty ! !

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:28:59'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:28:59'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:28:59'!
PASSED!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:28:59'!
ERROR!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:28:59'!
ERROR!
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:29:11' prior: 50919109!
test02

	| cart aBook aCatalog |
	aBook _ 'growing object-oriented software guided by tests'.
	aCatalog _ OrderedCollection with:  aBook.
	cart _ Cart with: aCatalog.
	cart addBook: 'growing object-oriented software guided by tests'.
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:29:23' prior: 50919002!
test03

	| cart aBook aCatalog |
	aBook _ 'growing object-oriented software guided by tests'.
	aCatalog _ OrderedCollection with:  aBook.
	cart _ Cart with: aCatalog.
	cart addBook: aBook.
	self assert: (cart includes: aBook).! !

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:29:28'!
PASSED!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:29:28'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:29:28'!
PASSED!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:29:28'!
PASSED!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:29:28'!
ERROR!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:29:28'!
ERROR!
!Cart class methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:29:48'!
bookNotInCatalogErrorDescription
	self shouldBeImplemented.! !
!Cart class methodsFor: 'as yet unclassified' stamp: 'AF 10/28/2021 21:30:29' prior: 50919167!
bookNotInCatalogErrorDescription
	
	^'Book not in catalog'! !

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:30:34'!
FAILURE!

!testRun: #CartTest #test01 stamp: 'AF 10/28/2021 21:30:47'!
PASSED!

!testRun: #CartTest #test02 stamp: 'AF 10/28/2021 21:30:47'!
PASSED!

!testRun: #CartTest #test03 stamp: 'AF 10/28/2021 21:30:47'!
PASSED!

!testRun: #CartTest #test04 stamp: 'AF 10/28/2021 21:30:47'!
PASSED!

----SNAPSHOT----(28 October 2021 21:43:37) CuisUniversity-4913.image priorSource: 18661997!

----SNAPSHOT----(30 October 2021 13:55:06) CuisUniversity-4913.image priorSource: 18821382!

----STARTUP---- (1 November 2021 19:16:23) as /home/ignacio/Documents/Facultad/repos-isw1/isw1/vms/tus-libros-it2-vm/CuisUniversity-4913.image!


----End fileIn of /home/ignacio/Documents/Facultad/repos-isw1/isw1-ejs/20-TusLibros/it1/TusLibros-It1.st----!

TestCase subclass: #CheckoutTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

!classDefinition: #CheckoutTest category: 'TusLibros-It1' stamp: 'IAR 11/1/2021 19:21:22'!
TestCase subclass: #CheckoutTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cart methodsFor: 'adding' stamp: 'IAR 11/1/2021 19:22:24'!
quantity: aQuantity addBook: aBook 
	
	self assertBookIncludedInCatalog: aBook.
	self assertQuantityIsPositive: aQuantity.
	
	contents add: aBook withOccurrences: aQuantity .! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:24' prior: 50914893!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	quantity _ 5.
	
	cart _ Cart with: catalog.
	cart quantity: book addBook: quantity.
	
	self assert: quantity equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:24' prior: 50914943!
assertAdding: aBook withQuantity: aQuantity to: aCart raises: anErrorMessage.

	self should: [ aCart quantity: aBook addBook: aQuantity ]
		raise: Error -  MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anErrorMessage equals: anError messageText .
			self deny: (aCart includes: aBook) ] ! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:24' prior: 50914873!
test03CartIncludesBookAfterAdding

	| cart book catalog |

	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	cart _ Cart with: catalog.
	cart quantity: book addBook: 1.
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:24' prior: 50914905!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	quantity _ 5.
	
	cart _ Cart with: catalog.
	cart quantity: book addBook: quantity.
	cart quantity: book addBook: quantity.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:24' prior: 50914863!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	cart _ Cart with: catalog.
	cart quantity: book addBook: 1.
	
	self deny: cart isEmpty ! !

!methodRemoval: Cart #addBook:quantity: stamp: 'IAR 11/1/2021 19:22:24'!
addBook: aBook quantity: aQuantity 
	
	self assertBookIncludedInCatalog: aBook.
	self assertQuantityIsPositive: aQuantity.
	
	contents add: aBook withOccurrences: aQuantity .!
!Cart methodsFor: 'adding' stamp: 'IAR 11/1/2021 19:22:34' prior: 50915046!
quantity: aQuantity addBook: aProduct 
	
	self assertBookIncludedInCatalog: aProduct.
	self assertQuantityIsPositive: aQuantity.
	
	contents add: aProduct withOccurrences: aQuantity .! !
!Cart methodsFor: 'adding' stamp: 'IAR 11/1/2021 19:22:53'!
add: aQuantity of: aProduct 
	
	self assertBookIncludedInCatalog: aProduct.
	self assertQuantityIsPositive: aQuantity.
	
	contents add: aProduct withOccurrences: aQuantity .! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:53' prior: 50915068!
assertAdding: aBook withQuantity: aQuantity to: aCart raises: anErrorMessage.

	self should: [ aCart add: aBook of: aQuantity ]
		raise: Error -  MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anErrorMessage equals: anError messageText .
			self deny: (aCart includes: aBook) ] ! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:53' prior: 50915109!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	cart _ Cart with: catalog.
	cart add: book of: 1.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:53' prior: 50915055!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	quantity _ 5.
	
	cart _ Cart with: catalog.
	cart add: book of: quantity.
	
	self assert: quantity equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:54' prior: 50915081!
test03CartIncludesBookAfterAdding

	| cart book catalog |

	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	cart _ Cart with: catalog.
	cart add: book of: 1.
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:22:54' prior: 50915092!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with:  book.
	quantity _ 5.
	
	cart _ Cart with: catalog.
	cart add: book of: quantity.
	cart add: book of: quantity.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !

!methodRemoval: Cart #quantity:addBook: stamp: 'IAR 11/1/2021 19:22:54'!
quantity: aQuantity addBook: aProduct 
	
	self assertBookIncludedInCatalog: aProduct.
	self assertQuantityIsPositive: aQuantity.
	
	contents add: aProduct withOccurrences: aQuantity .!

!classDefinition: #Cashier category: 'TusLibros-It1' stamp: 'IAR 11/1/2021 19:30:56'!
Object subclass: #Cashier
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!CheckoutTest methodsFor: 'nil' stamp: 'IAR 11/1/2021 19:30:42'!
test01

	| cart cashier catalog |
	cart _ self createCartWith: catalog. 
	cashier _ self createCashier.
	
	self should: [ cashier checkout: cart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:32:00'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:32:09'!
createCartWith: anUndefinedObject 
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:34:53' prior: 50915220!
test01

	| cart cashier |
	cart _ self createCart. 
	cashier _ self createCashier.
	
	self should: [ cashier checkout: cart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:35:00'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:35:05'!
createCart
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:35:25' prior: 50915255!
createCart
	
	^ Cart with: self defaultCatalog.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:35:27'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:35:37'!
defaultCatalog
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:36:02' prior: 50915267!
defaultCatalog
	
	^ {self validBook}.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:36:27' prior: 50915272!
defaultCatalog
	
	^ Set with: self validBook.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:36:28'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:36:34'!
validBook
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:36:46' prior: 50915284!
validBook
	
	^ 'validBook'.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:37:08'!
productSoldByTheStore
	
	^ 'validBook'.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:37:08' prior: 50915277!
defaultCatalog
	
	^ Set with: self productSoldByTheStore.! !

!methodRemoval: CheckoutTest #validBook stamp: 'IAR 11/1/2021 19:37:08'!
validBook
	
	^ 'validBook'.!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:37:17'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:37:23'!
createCashier
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:37:31' prior: 50915308!
createCashier
	
	^ Cashier new.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:37:32'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:37:44'!
checkout: aCart 
	self shouldBeImplemented.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:38:20' prior: 50915319!
checkout: aCart 
	
	self error: self class emptyCartErrorDescription.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:38:21'!
ERROR!
!Cashier class methodsFor: 'error descriptions' stamp: 'IAR 11/1/2021 19:38:50'!
emptyCartErrorDescription
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'error descriptions' stamp: 'IAR 11/1/2021 19:39:15' prior: 50915332!
emptyCartErrorDescription
	
	^ 'Cannot checkout empty cart'! !
!Cashier class methodsFor: 'error descriptions' stamp: 'IAR 11/1/2021 19:39:22' prior: 50915337!
emptyCartErrorDescription
	
	^ 'Cannot checkout empty cart'.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:39:23'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:39:23'!
PASSED!
!Cart class methodsFor: 'instance creation' stamp: 'IAR 11/1/2021 19:40:06'!
acceptingProductsFrom: aCatalog
	
	^self new initializeWith: aCatalog ! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915298!
defaultCatalog
	
	^ Set acceptingProductsFrom: self productSoldByTheStore.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50914883!
test04CantAddBookNotIncludedInCatalog

	| cart catalog |
	
	catalog _ OrderedCollection new.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: self bookGrowingOOSoft 
		withQuantity: 1 
		to: cart 
		raises: Cart bookNotInCatalogErrorDescription.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50914921!
test07CantAddBookWithZeroQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: 0 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915167!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom:  book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: quantity.
	
	self assert: quantity equals: (cart occurrencesOf: book).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915260!
createCart
	
	^ Cart acceptingProductsFrom: self defaultCatalog.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915180!
test03CartIncludesBookAfterAdding

	| cart book catalog |

	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom:  book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: 1.
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50914932!
test08CantAddBookWithNegativeQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915157!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom:  book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: 1.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50915190!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection acceptingProductsFrom:  book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: quantity.
	cart add: book of: quantity.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:40:06' prior: 50914856!
test01NewCartIsEmpty

	| cart catalog |

	catalog _ OrderedCollection new.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assert: cart isEmpty.! !

!methodRemoval: Cart class #with: stamp: 'IAR 11/1/2021 19:40:06'!
with: aCatalog
	
	^self new initializeWith: aCatalog !
!Cart methodsFor: 'assertions' stamp: 'IAR 11/1/2021 19:40:32' prior: 50914990!
assertQuantityIsPositive: aQuantity

	^aQuantity strictlyPositive ifTrue: [ self error: self class invalidQuantityErrorDescription ]! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:40:37'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 19:40:37'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:40:37'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:42:15' prior: 50915434!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: 1.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:42:28' prior: 50915409!
test03CartIncludesBookAfterAdding

	| cart book catalog |

	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: 1.
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:42:44' prior: 50915389!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: quantity.
	
	self assert: quantity equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:42:51' prior: 50915445!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: book of: quantity.
	cart add: book of: quantity.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:43:01' prior: 50915376!
test07CantAddBookWithZeroQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: 0 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:43:08' prior: 50915421!
test08CantAddBookWithNegativeQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:43:12'!
FAILURE!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:43:16'!
FAILURE!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:44:45'!
FAILURE!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 19:45:35'!
FAILURE!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 19:45:43'!
ERROR!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:46:32'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:46:32'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:46:32'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 19:46:32'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 19:46:32'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 19:46:32'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 19:46:32'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 19:46:32'!
FAILURE!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:46:32'!
FAILURE!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:46:40'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:46:45'!
ERROR!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:46:45'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:48:51' prior: 50915509!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: 1 of: book.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:49:03' prior: 50915519!
test03CartIncludesBookAfterAdding

	| cart book catalog |

	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: 1 of: book.
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:49:25' prior: 50915530!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: quantity of: book.
	
	self assert: quantity equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:49:33' prior: 50915543!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: quantity of: book.
	cart add: book of: quantity.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'tests' stamp: 'IAR 11/1/2021 19:49:43' prior: 50915670!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	"paso de una pero lo dejamos porque no sabiamos como funcioanaba el bag"
	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: quantity of: book.
	cart add: quantity of: book.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'assertions' stamp: 'IAR 11/1/2021 19:50:04' prior: 50915144!
assertAdding: aBook withQuantity: aQuantity to: aCart raises: anErrorMessage.

	self should: [ aCart add: aQuantity of: aBook]
		raise: Error -  MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anErrorMessage equals: anError messageText .
			self deny: (aCart includes: aBook) ] ! !
!CartTest methodsFor: 'assertions' stamp: 'IAR 11/1/2021 19:50:10' prior: 50915703!
assertAdding: aBook withQuantity: aQuantity to: aCart raises: anErrorMessage.

	self should: [ aCart add: aQuantity of: aBook ]
		raise: Error -  MessageNotUnderstood
		withExceptionDo: [ :anError | 
			self assert: anErrorMessage equals: anError messageText .
			self deny: (aCart includes: aBook) ] ! !
!CartTest methodsFor: 'books' stamp: 'IAR 11/1/2021 19:50:18' prior: 50914955!
bookGrowingOOSoft

	^'growing object-oriented software guided by tests'.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:50:22'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:50:22'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 19:50:22'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 19:50:22'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 19:50:22'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 19:50:22'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 19:50:22'!
FAILURE!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:50:22'!
FAILURE!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:50:27'!
ERROR!
!Cart methodsFor: 'assertions' stamp: 'IAR 11/1/2021 19:50:44' prior: 50915474!
assertQuantityIsPositive: aQuantity

	^aQuantity strictlyPositive ifFalse: [ self error: self class invalidQuantityErrorDescription ]! !

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:50:45'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 19:50:46'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:50:58'!
ERROR!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:51:10'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:51:31' prior: 50915358!
defaultCatalog
	
	^ Set with: self productSoldByTheStore.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:51:39'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:51:39'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:51:43'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 19:51:43'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:52:07'!
test02

	| cart cashier |
	cart _ self createCart. 
	cashier _ self createCashier.
	
	self should: [ cashier checkout: cart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !

!methodRemoval: CheckoutTest #createCartWith: stamp: 'IAR 11/1/2021 19:53:07'!
createCartWith: anUndefinedObject 
	self shouldBeImplemented.!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:56:10' prior: 50915313!
createCashier
	
	^ Cashier sourcingPricesFrom: self defaultPriceList.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:58:05' prior: 50915817!
test02

	| cart cashier |
	cart _ self createCart. 
	cashier _ self createCashier.
	
	self assert: 100 equals: cashier checkout: cart.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:58:13' prior: 50915840!
test02

	| cart cashier |
	cart _ self createCart. 
	cashier _ self createCashier.
	
	self assert: 100 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:59:18' prior: 50915848!
test02

	| cart cashier |
	cart _ self createCart. 
	cashier _ self createCashier.
	
	self assert: self productSoldByTheStorePrice equals: (cashier checkout: cart).! !

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 19:59:22'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 19:59:28'!
defaultPriceList
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:00:04' prior: 50915834!
createCashier
	
	"^ Cashier sourcingPricesFrom: self defaultPriceList."
	^ Cashier new.! !

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:00:09'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:00:15'!
productSoldByTheStorePrice
	self shouldBeImplemented.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:00:33' prior: 50915880!
productSoldByTheStorePrice
	
	^ 100.! !

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:00:35'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:00:50' prior: 50915856!
test02

	| cart cashier |
	cart _ self createCart.
	cashier _ self createCashier.
	
	self assert: self productSoldByTheStorePrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:01:20' prior: 50915892!
test02

	| cart cashier |
	cart _ self createCart.
	cashier _ self createCashier.
	
	cart add: 1 of: self productSoldByTheStore.
	self assert: self productSoldByTheStorePrice equals: (cashier checkout: cart).! !

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:01:28'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:02:11' prior: 50915324!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:02:15'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:02:15'!
FAILURE!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:02:15'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:03:07' prior: 50915913!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].
	^ 100.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:03:17'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:03:17'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:03:33' prior: 50915901!
test02

	| cart cashier |
	cart _ self createCart.
	cashier _ self createCashier.
	
	cart add: 1 of: self productSoldByTheStore.
	
	self assert: self productSoldByTheStorePrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:05:42'!
test03

	| cart cashier quantity |
	cart _ self createCart.
	cashier _ self createCashier.
	quantity _ 5.
	
	cart add: quantity of: self productSoldByTheStore.
	
	self assert: (quantity * self productSoldByTheStorePrice) equals: (cashier checkout: cart).! !

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:05:45'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:13:38' prior: 50915926!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].
	^ aCart totalPriceXX: 100.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:13:46'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:13:46'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:13:46'!
ERROR!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:13:55'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:14:09'!
totalPriceXX: aSmallInteger 
	self shouldBeImplemented.! !

----End fileIn of /home/ignacio/Documents/Facultad/repos-isw1/isw1/vms/tus-libros-it2-vm/Packages/TerseGuide.pck.st----!
!Cart methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:17:35' prior: 50915977!
totalPriceXX: aPrice

	^ contents sum: [ :aProduct | aPrice ].! !

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:17:36'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:17:41'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:17:43'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:17:43'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:17:43'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:20:46'!
test04

	| cart cashier quantity |
	cart _ self createCart.
	cashier _ self createCashier.
	quantity _ 5.
	
	cart add: quantity of: self productSoldByTheStore.
	cart add: 1 of: 'otherProductSoldByTheStore'.

	
	self assert: 550 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:21:06'!
otherProductSoldByTheStore

	^ 'otherProductSoldByTheStore'! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:21:06' prior: 50918925!
test04

	| cart cashier quantity |
	cart _ self createCart.
	cashier _ self createCashier.
	quantity _ 5.
	
	cart add: quantity of: self productSoldByTheStore.
	cart add: 1 of: self otherProductSoldByTheStore.

	
	self assert: 550 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:21:24' prior: 50918936!
otherProductSoldByTheStore

	^ 'Platero y Yo'.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:21:31'!
otherProductSoldByTheStorePrice

	^ 50.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:21:51' prior: 50915803!
defaultCatalog
	
	^ Set
		with: self productSoldByTheStore
		with: self otherProductSoldByTheStore.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:21:55'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:21:55'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:21:55'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:21:55'!
FAILURE!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:21:55'!
FAILURE!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:24:51' prior: 50915872!
createCashier
	
	^ Cashier sourcingPricesFrom: self defaultPriceList.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:26:03' prior: 50915867!
defaultPriceList
	
	^ { self productSoldByTheStore -> self productSoldByTheStorePrice }.! !

{ self productSoldByTheStore -> self productSoldByTheStorePrice }!

self productSoldByTheStore -> self productSoldByTheStorePrice !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:28:02' prior: 50918987!
defaultPriceList
	
	^ self productSoldByTheStore! !

	^ self productSoldByTheStore!

self productSoldByTheStore.!

'hola' -> 100!

{'hola' -> 100}!

{'hola' -> 100. 'hola' -> 100}!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:31:04' prior: 50918998!
defaultPriceList
	
	^ Dictionary new add: (self productSoldByTheStore -> self productSoldByTheStorePrice )! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:31:57' prior: 50919007!
defaultPriceList
	
	^ Dictionary new add: (self productSoldByTheStore -> self productSoldByTheStorePrice);
		add: (self otherProductSoldByTheStore -> self otherProductSoldByTheStorePrice); yourself! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:32:13'!
ERROR!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:32:13'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:32:13'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:32:13'!
ERROR!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:32:19'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'IAR 11/1/2021 20:32:25'!
sourcingPricesFrom: aDictionary 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeSourcingPricesFrom: aDictionary ! !
!Cashier class methodsFor: 'instance creation' stamp: 'IAR 11/1/2021 20:32:46' prior: 50919035!
sourcingPricesFrom: aPriceList 

	^self new initializeSourcingPricesFrom: aPriceList ! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:32:47'!
ERROR!

!classDefinition: #Cashier category: 'TusLibros-It1' stamp: 'IAR 11/1/2021 20:33:00'!
Object subclass: #Cashier
	instanceVariableNames: 'priceList'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cashier methodsFor: 'initialization' stamp: 'IAR 11/1/2021 20:33:00'!
initializeSourcingPricesFrom: aPriceList 
	self shouldBeImplemented.
	priceList := aPriceList.! !
!Cashier methodsFor: 'initialization' stamp: 'IAR 11/1/2021 20:33:07' prior: 50919059!
initializeSourcingPricesFrom: aPriceList 
	
	priceList := aPriceList.! !

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:33:08'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:33:10'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:33:10'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:33:10'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:33:10'!
FAILURE!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:33:10'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:33:29' prior: 50915961!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].
	^ aCart totalPriceXX: priceList.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:33:42' prior: 50918908!
totalPriceXX: aPriceList

	^ contents sum: [ :aProduct | aPriceList ].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'IAR 11/1/2021 20:36:23' prior: 50919092!
totalPriceXX: aPriceList

	^ contents sum: [ :aProduct | aPriceList at: aProduct 
		ifAbsent: [ self error: 'Producto no en catalogo' ] ].! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 20:36:26'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'IAR 11/1/2021 20:36:29'!
PASSED!

----QUIT----(1 November 2021 21:44:12) CuisUniversity-4913.image priorSource: 18661997!

----STARTUP---- (1 November 2021 23:34:07) as /home/mnpanic/Documents/dc/ing1/cuis/cuis-tuslibros/CuisUniversity-4913.image!


----End fileIn of /home/mnpanic/repos/uba/ing1-repos/isw1-ejs/20-TusLibros/it2/TusLibros-It2.st----!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/1/2021 23:37:25'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/1/2021 23:37:25'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/1/2021 23:37:25'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/1/2021 23:37:25'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/1/2021 23:37:25'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/1/2021 23:37:27'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/1/2021 23:37:27'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:38:52' prior: 50915049!
test04

	| cart cashier quantity |
	cart _ self createCart.
	cashier _ self createCashier.
	quantity _ 5.
	
	cart add: quantity of: self productSoldByTheStore.
	cart add: 1 of: self otherProductSoldByTheStore.

	
	self assert: 550 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:38:55' prior: 50915234!
test04

	| cart cashier quantity |
	cart _ self createCart.
	cashier _ self createCashier.
	quantity _ 5.
	
	cart add: quantity of: self productSoldByTheStore.
	cart add: 1 of: self otherProductSoldByTheStore.
	
	self assert: 550 equals: (cashier checkout: cart).! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:39:43' prior: 50915151!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].
	^ aCart totalPrice.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:40:07'!
totalPrice

	^ contents sum: [ :aProduct | catalog at: aProduct 
		ifAbsent: [ self error: 'Producto no en catalogo' ] ].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:41:23' prior: 50915264!
totalPrice

	^ contents sum: [
		:aProduct | catalog at: aProduct ifAbsent: [ self error: 'Producto no en catalogo' ]
	].! !

!methodRemoval: Cart #totalPriceXX: stamp: 'MP 11/1/2021 23:41:38'!
totalPriceXX: aPriceList

	^ contents sum: [ :aProduct | aPriceList at: aProduct 
		ifAbsent: [ self error: 'Producto no en catalogo' ] ].!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/1/2021 23:41:46'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/1/2021 23:41:46'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/1/2021 23:41:46'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/1/2021 23:41:46'!
ERROR!

Object subclass: #TestObjectFactory
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!

!classDefinition: #TestObjectFactory category: 'TusLibros-It1' stamp: 'MP 11/1/2021 23:43:10'!
Object subclass: #TestObjectFactory
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!TestObjectFactory methodsFor: 'nil' stamp: 'MP 11/1/2021 23:43:42'!
createCart

	^Cart acceptingProductsFrom: self defaultCatalog.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:45:37'!
defaultCatalog

	^Dictionary new;
		at: self firstProductSoldByTheStore put: self firstProductSoldByTheStorePrice;
		at: self secondProductSoldByTheStore put: self secondProductSoldByTheStore;
		yourself.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:45:40' prior: 50915335!
defaultCatalog

	^Dictionary new;
		at: self firstProductSoldByTheStore put: self firstProductSoldByTheStorePrice;
		at: self secondProductSoldByTheStore put: self secondProductSoldByTheStore;
		yourself.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:45:45' prior: 50915345!
defaultCatalog

	^ Dictionary new;
		at: self firstProductSoldByTheStore put: self firstProductSoldByTheStorePrice;
		at: self secondProductSoldByTheStore put: self secondProductSoldByTheStore;
		yourself.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:45:48' prior: 50915330!
createCart

	^ Cart acceptingProductsFrom: self defaultCatalog.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:46:03'!
firstProductSoldByTheStore

	^ 'firstBook'
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:46:12'!
firstProductSoldByTheStorePrice

	^ 100.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:46:37'!
secondProductSoldByTheStorePrice

	^ 50.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:46:48'!
secondProductSoldByTheStore

	^ 'second book'.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:00' prior: 50915385!
secondProductSoldByTheStore

	^ 'da baibol'.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:08' prior: 50915390!
secondProductSoldByTheStore

	^ ''.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:10' prior: 50915395!
secondProductSoldByTheStore

	^ 'The Bible.'.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:10' prior: 50915400!
secondProductSoldByTheStore

	^ 'The Bible'.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:31' prior: 50915370!
firstProductSoldByTheStore

	^ ''
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:47:57' prior: 50915410!
firstProductSoldByTheStore

	^ ''
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:48:10' prior: 50915415!
firstProductSoldByTheStore

	^ 'growing object-oriented software guided by tests'
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:48:12' prior: 50915420!
firstProductSoldByTheStore

	^ 'growing object-oriented software guided by tests'
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:48:19' prior: 50915426!
firstProductSoldByTheStore

	"The one true way of designing systems."
	^ 'growing object-oriented software guided by tests'
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:48:37' prior: 50915432!
firstProductSoldByTheStore

	"The one true way of designing systems."
	^ 'growing object-oriented software guided by tests'
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:49:04'!
createCashier

	^ Cashier sourcingPricesFrom: self defaultCatalog.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:53:01' prior: 50915447!
createCashier

	^ Cashier new.! !

!methodRemoval: Cashier class #sourcingPricesFrom: stamp: 'MP 11/1/2021 23:53:09'!
sourcingPricesFrom: aPriceList 

	^self new initializeSourcingPricesFrom: aPriceList !

!methodRemoval: Cashier #initializeSourcingPricesFrom: stamp: 'MP 11/1/2021 23:53:15'!
initializeSourcingPricesFrom: aPriceList 
	
	priceList := aPriceList.!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:53:28' prior: 50915258!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].

	^ aCart totalPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:53:30' prior: 50915468!
checkout: aCart 
	
	aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ].

	^ aCart totalPrice.
! !

!methodRemoval: CheckoutTest #createCart stamp: 'MP 11/1/2021 23:55:53'!
createCart
	
	^ Cart acceptingProductsFrom: self defaultCatalog.!

!methodRemoval: CheckoutTest #createCashier stamp: 'MP 11/1/2021 23:55:55'!
createCashier
	
	^ Cashier sourcingPricesFrom: self defaultPriceList.!

!classDefinition: #CheckoutTest category: 'TusLibros-It1' stamp: 'MP 11/1/2021 23:56:31'!
TestCase subclass: #CheckoutTest
	instanceVariableNames: 'testObjectFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:56:29' overrides: 16927572!
setUp

	testObjectFactory _ TestObjectFactory new.! !

!methodRemoval: CheckoutTest #defaultPriceList stamp: 'MP 11/1/2021 23:59:25'!
defaultPriceList
	
	^ Dictionary new add: (self productSoldByTheStore -> self productSoldByTheStorePrice);
		add: (self otherProductSoldByTheStore -> self otherProductSoldByTheStorePrice); yourself!

!methodRemoval: CheckoutTest #defaultCatalog stamp: 'MP 11/1/2021 23:59:29'!
defaultCatalog
	
	^ Set
		with: self productSoldByTheStore
		with: self otherProductSoldByTheStore.!

!methodRemoval: CheckoutTest #otherProductSoldByTheStore stamp: 'MP 11/1/2021 23:59:34'!
otherProductSoldByTheStore

	^ 'Platero y Yo'.!

!methodRemoval: CheckoutTest #otherProductSoldByTheStorePrice stamp: 'MP 11/1/2021 23:59:36'!
otherProductSoldByTheStorePrice

	^ 50.!

!methodRemoval: CheckoutTest #productSoldByTheStore stamp: 'MP 11/1/2021 23:59:38'!
productSoldByTheStore
	
	^ 'validBook'.!

!methodRemoval: CheckoutTest #productSoldByTheStorePrice stamp: 'MP 11/1/2021 23:59:40'!
productSoldByTheStorePrice
	
	^ 100.!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:59:45' prior: 50915016!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ self createCashier.
	
	self should: [ cashier checkout: cart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:59:47' prior: 50915535!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [ cashier checkout: cart ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:59:54' prior: 50915028!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: 1 of: testObjectFactory productSoldByTheStore.
	
	self assert: testObjectFactory productSoldByTheStorePrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/1/2021 23:59:58' prior: 50915561!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: 1 of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: testObjectFactory productSoldByTheStorePrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:00:02' prior: 50915573!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: 1 of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: testObjectFactory firstProductSoldByTheStorePrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:00:08' prior: 50915038!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: (quantity * self productSoldByTheStorePrice) equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:00:12' prior: 50915597!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice) equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:00:20' prior: 50915246!
test04

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: 1 of: testObjectFactory otherProductSoldByTheStore.
	
	self assert: 550 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:00:24' prior: 50915623!
test04

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: 1 of: testObjectFactory secondProductSoldByTheStore.
	
	self assert: 550 equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:03:46' prior: 50915637!
test04

	| cart cashier quantity expectedPrice |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: 1 of: testObjectFactory secondProductSoldByTheStore.
	
	expectedPrice _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice)
	
	self assert: expectedPrice equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:04:00' prior: 50915651!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: 1 of: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice)
	
	self assert: expectedRecepit equals: (cashier checkout: cart).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:04:12' prior: 50915670!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: 1 of: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit equals: (cashier checkout: cart).! !

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:04:15'!
ERROR!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:04:32' prior: 50915355!
defaultCatalog

	^ Dictionary new
		at: self firstProductSoldByTheStore put: self firstProductSoldByTheStorePrice;
		at: self secondProductSoldByTheStore put: self secondProductSoldByTheStore;
		yourself.
! !

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:04:35'!
ERROR!

d _ Dictionary new at: 'a' put: 1; at: 'b' put: 2;yourself.!

d includes: 'a'.!

d includes: 1.!

d includesKey: 'a'.!

----End fileIn of /home/mnpanic/Documents/dc/ing1/cuis/cuis-tuslibros/Packages/TerseGuide.pck.st----!
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:08:14' prior: 50915083!
assertBookIncludedInCatalog: aBook

	^ (catalog includesKey: aBook) ifFalse: [ self error: self class bookNotInCatalogErrorDescription ]! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:08:15'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:08:15'!
ERROR!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:08:15'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:08:15'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:08:15'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:08:15'!
ERROR!
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:08:19' prior: 50918651!
assertBookIncludedInCatalog: aBook

	^ (catalog includesKey: aBook) ifFalse: [ self error: self class bookNotInCatalogErrorDescription ].! !

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:08:24'!
ERROR!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:09:21' prior: 50915710!
defaultCatalog

	^ Dictionary new
		at: self firstProductSoldByTheStore put: self firstProductSoldByTheStorePrice;
		at: self secondProductSoldByTheStore put: self secondProductSoldByTheStorePrice;
		yourself.
! !

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:09:22'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:09:22'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:09:22'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:09:22'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:09:26'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:09:26'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:09:26'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:09:26'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:09:26'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:09:27'!
ERROR!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:09:27'!
PASSED!

!classDefinition: #CartTest category: 'TusLibros-It1' stamp: 'MP 11/2/2021 00:10:19'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:10:17' overrides: 16927572!
setUp

	testObjectFactory _ TestObjectFactory new.! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:11:04' prior: 50914856!
test01NewCartIsEmpty

	| cart |

	cart _ testObjectFactory createCart.
	
	self assert: cart isEmpty.! !

!methodRemoval: CartTest #bookGrowingOOSoft stamp: 'MP 11/2/2021 00:11:16'!
bookGrowingOOSoft

	^'growing object-oriented software guided by tests'.!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:11:28' prior: 50914863!
test02CartWithABookShouldNotBeEmpty

	| cart book catalog |
	
	cart _ testObjectFactory createCart.
	cart add: 1 of: book.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:11:42' prior: 50918792!
test02CartWithABookShouldNotBeEmpty

	| cart book |
	
	cart _ testObjectFactory createCart.
	cart add: book.
	
	self deny: cart isEmpty ! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:11:59' prior: 50918800!
test02CartWithABookShouldNotBeEmpty

	| cart |
	
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self deny: cart isEmpty ! !

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:12:02'!
ERROR!
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:12:15'!
add: aProduct 
	
	self assertBookIncludedInCatalog: aProduct.
	
	contents add: aProduct withOccurrences: 1 .! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:12:23' prior: 50918818!
add: aProduct 
	
	self add: 1 of: aProduct.! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:12:49' prior: 50914873!
test03CartIncludesBookAfterAdding

	| cart book |

	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore .
	
	self assert: (cart includes: book).! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:13:01' prior: 50918828!
test03CartIncludesBookAfterAdding

	| cart |

	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore .
	
	self assert: (cart includes: testObjectFactory firstProductSoldByTheStore).! !

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:13:03'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:13:03'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:13:03'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:13:03'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:13:03'!
ERROR!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:13:03'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/2/2021 00:13:03'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:13:03'!
ERROR!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:13:03'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:13:10' prior: 50914883!
test04CantAddBookNotIncludedInCatalog

	| cart |
	
	cart _ testObjectFactory createCart.
	
	self assertAdding: self bookGrowingOOSoft 
		withQuantity: 1 
		to: cart 
		raises: Cart bookNotInCatalogErrorDescription.! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:14:06' prior: 50918875!
test04CantAddBookNotIncludedInCatalog

	| cart |
	
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory productNotSoldByTheStore
		withQuantity: 1 
		to: cart 
		raises: Cart bookNotInCatalogErrorDescription.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:14:46'!
productNotSoldByTheStore

	^ 'El Cormen.'
! !

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:15:04'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:15:04'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:15:04'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:15:04'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:15:04'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:15:04'!
ERROR!

!testRun: #CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/2/2021 00:15:04'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:15:04'!
ERROR!

!testRun: #CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:15:04'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:15:34' prior: 50914894!
test05CartIncludesAllOccurrencesOfBookAfterAdding

	| cart quantity |

	cart _ testObjectFactory createCart.
	quantity _ 5.
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: quantity equals: (cart occurrencesOf: testObjectFactory firstProductSoldByTheStore).! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:15:53' prior: 50914906!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	| cart book catalog quantity |
	
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	quantity _ 5.
	
	cart _ Cart acceptingProductsFrom: catalog.
	cart add: quantity of: book.
	cart add: quantity of: book.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:16:15' prior: 50918941!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	| cart book quantity |
	
	quantity _ 5.
	
	cart _ testObjectFactory createCart.
	cart add: quantity of: book.
	cart add: quantity of: book.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).! !

!methodRemoval: CartTest #test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes stamp: 'MP 11/2/2021 00:16:21'!
test06CartContainsTotalOccurrencesAfterAddingItMultipleTimes

	| cart book quantity |
	
	quantity _ 5.
	
	cart _ testObjectFactory createCart.
	cart add: quantity of: book.
	cart add: quantity of: book.
	
	self assert: (quantity*2) equals: (cart occurrencesOf: book).!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:16:28'!
test06CantAddBookWithZeroQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: 0 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !

!methodRemoval: CartTest #test07CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:16:28'!
test07CantAddBookWithZeroQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: 0 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:16:34'!
test07CantAddBookWithNegativeQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !

!methodRemoval: CartTest #test08CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:16:34'!
test08CantAddBookWithNegativeQuantity

	| cart book catalog |
	book _ self bookGrowingOOSoft.
	catalog _ OrderedCollection with: book.
	cart _ Cart acceptingProductsFrom: catalog.
	
	self assertAdding: book 
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:17:19' prior: 50919001!
test07CantAddBookWithNegativeQuantity

	| cart |
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory firstProductSoldByTheStore
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:17:23'!
ERROR!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:17:23'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:17:23'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:17:33' prior: 50919025!
test07CantAddBookWithNegativeQuantity

	| cart |
	cart _ testObjectFactory createCart.

	self assertAdding: testObjectFactory firstProductSoldByTheStore
		withQuantity: -1 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:17:55' prior: 50918978!
test06CantAddBookWithZeroQuantity

	| cart |
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory secondProductSoldByTheStore 
		withQuantity: 0 
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:17:58'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:17:58'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:19:26' prior: 50919073!
test06CantAddBookWithZeroQuantity

	| cart |
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory secondProductSoldByTheStore 
		withQuantity: 0
		to: cart 
		raises: Cart invalidQuantityErrorDescription.! !
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:19:27' prior: 50919108!
test06CantAddBookWithZeroQuantity

	| cart |
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory secondProductSoldByTheStore 
		withQuantity: 0
		to: cart
		raises: Cart invalidQuantityErrorDescription.! !

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:19:27'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:19:33'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:19:33'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:19:33'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:19:34'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:19:34'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:20:36' prior: 50915689!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit equals: (cashier checkout: cart).! !

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:20:39'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:20:39'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:20:39'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:20:39'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:20:39'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:20:41'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:20:41'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:21:24'!
assertCartIsNotEmpty: aCart

	^ aCart isEmpty ifTrue: [ self error: self class emptyCartErrorDescription ]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:21:24' prior: 50915475!
checkout: aCart 
	
	self assertCartIsNotEmpty: aCart.

	^ aCart totalPrice.
! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:22:57' prior: 50915271!
totalPrice

	^ contents sum: [
		:aProduct | catalog at: aProduct ifAbsent: [ self error: 'Producto no en catalogo' ]
	].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:23:54'!
priceOf: aProduct

	^ catalog at: aProduct ifAbsent: [ self error: 'Producto no en catalogo' ]! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:23:54' prior: 50919261!
totalPrice

	^ contents sum: [
		:aProduct | self priceOf: aProduct
	].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:24:00' prior: 50919274!
totalPrice

	^ contents sum: [ :aProduct | self priceOf: aProduct ].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:24:21' prior: 50919268!
priceOf: aProduct

	^ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ]! !
!Cart class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 00:24:45'!
productNotInCatalogErrorDescription
	
	^ 'product not in catalog'! !
!Cart class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 00:24:48' prior: 50915134!
invalidQuantityErrorDescription
	
	^ 'cant add a book with less than 1 quantity'! !
!Cart class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 00:24:51' prior: 50915129!
bookNotInCatalogErrorDescription
	
	^ 'Book not in catalog'! !
!Cart class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 00:24:51' prior: 50919304!
bookNotInCatalogErrorDescription
	
	^ 'book not in catalog'! !

!methodRemoval: Cart class #bookNotInCatalogErrorDescription stamp: 'MP 11/2/2021 00:24:59'!
bookNotInCatalogErrorDescription
	
	^ 'book not in catalog'!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:06'!
ERROR!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:25:06'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:06'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'MP 11/2/2021 00:25:10' prior: 50918885!
test04CantAddBookNotIncludedInCatalog

	| cart |
	
	cart _ testObjectFactory createCart.
	
	self assertAdding: testObjectFactory productNotSoldByTheStore
		withQuantity: 1 
		to: cart 
		raises: Cart productNotInCatalogErrorDescription.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:14'!
ERROR!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:25:14'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:14'!
ERROR!
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:25:19' prior: 50918692!
assertBookIncludedInCatalog: aBook

	^ (catalog includesKey: aBook) ifFalse: [ self error: self class productNotInCatalogErrorDescription ].! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:25:21'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:25:21'!
PASSED!
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:25:38' prior: 50919285!
priceOf: aProduct

	^ catalog at: aProduct! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:25:39'!
PASSED!

!classDefinition: #Cart category: 'TusLibros-It1' stamp: 'MP 11/2/2021 00:29:51'!
Object subclass: #Cart
	instanceVariableNames: 'contents catalog subTotal'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:29:48' prior: 50915075!
add: aQuantity of: aProduct 
	
	| productPrice |
	self assertQuantityIsPositive: aQuantity.
	
	productPrice _ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: aProduct withOccurrences: aQuantity .
	subTotal _ subTotal + productPrice.! !

!methodRemoval: Cart #priceOf: stamp: 'MP 11/2/2021 00:30:11'!
priceOf: aProduct

	^ catalog at: aProduct!
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:30:20' prior: 50919280!
totalPrice

	^ subTotal.! !

!classDefinition: #Cart category: 'TusLibros-It1' stamp: 'MP 11/2/2021 00:30:35'!
Object subclass: #Cart
	instanceVariableNames: 'contents catalog totalPrice'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:30:35' prior: 50919476!
add: aQuantity of: aProduct 
	
	| productPrice |
	self assertQuantityIsPositive: aQuantity.
	
	productPrice _ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: aProduct withOccurrences: aQuantity .
	totalPrice _ totalPrice + productPrice.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:30:36' prior: 50919492!
totalPrice

	^ totalPrice.! !
!Cart methodsFor: 'accessing' stamp: 'MP 11/2/2021 00:30:46' prior: 50915071!
occurrencesOf: aBook

	^ contents occurrencesOf: aBook.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:30:48'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:30:48'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:30:48'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:30:48'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:30:48'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:30:48'!
ERROR!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:30:58'!
ERROR!
!Cart methodsFor: 'initialization' stamp: 'MP 11/2/2021 00:31:11' prior: 50915097!
initializeWith: aCatalog 
	
	catalog _ aCatalog.
	contents _ Bag new.
	totalPrice _ 0.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:31:14'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:31:14'!
FAILURE!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:31:14'!
FAILURE!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:31:18'!
FAILURE!
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:31:38' prior: 50919503!
add: aQuantity of: aProduct 
	
	| productPrice |
	self assertQuantityIsPositive: aQuantity.
	
	productPrice _ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: aProduct withOccurrences: aQuantity .
	totalPrice _ totalPrice + productPrice * aQuantity .! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:31:39' prior: 50919597!
add: aQuantity of: aProduct 
	
	| productPrice |
	self assertQuantityIsPositive: aQuantity.
	
	productPrice _ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: aProduct withOccurrences: aQuantity .
	totalPrice _ totalPrice + productPrice * aQuantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:31:44' prior: 50919610!
add: quantity of: aProduct 
	
	| productPrice |
	self assertQuantityIsPositive: quantity.
	
	productPrice _ catalog at: aProduct
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: aProduct withOccurrences: quantity .
	totalPrice _ totalPrice + productPrice * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:31:48' prior: 50919623!
add: quantity of: product 
	
	| productPrice |
	self assertQuantityIsPositive: quantity.
	
	productPrice _ catalog at: product
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: product withOccurrences: quantity .
	totalPrice _ totalPrice + productPrice * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:31:50' prior: 50919636!
add: quantity of: product 
	
	| productPrice |
	self assertQuantityIsPositive: quantity.
	
	productPrice _ catalog at: product
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + productPrice * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:34:02' prior: 50919649!
add: quantity of: product 
	
	| productPrice |
	self assertQuantityIsPositive: quantity.
	
	productPrice _ catalog at: product
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + productPrice * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:34:57'!
add2: quantity of: product 
	
	
	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product)  * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:35:03' prior: 50919674!
add2: quantity of: product 

	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product)  * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:36:52' prior: 50919662!
add: quantity of: product 
	
	| productPrice |
	self assertQuantityIsPositive: quantity.
	
	productPrice _ catalog at: product
		ifAbsent: [ self error: self class productNotInCatalogErrorDescription ].
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + productPrice * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:37:57' prior: 50919684!
add2: quantity of: product 

	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product) * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:38:42' prior: 50919694!
add: quantity of: product 
	
	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product) * quantity.! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:38:45' prior: 50919717!
add: quantity of: product 
	
	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.

	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product) * quantity.! !
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:39:00' prior: 50915090!
assertQuantityIsPositive: aQuantity

	^ aQuantity strictlyPositive ifFalse: [ self error: self class invalidQuantityErrorDescription ]! !

!methodRemoval: Cart #add2:of: stamp: 'MP 11/2/2021 00:39:13'!
add2: quantity of: product 

	self assertProductInCatalog: product.
	self assertQuantityIsPositive: quantity.
	
	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product) * quantity.!
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:39:23'!
assertProductIncludedInCatalog: aBook

	^ (catalog includesKey: aBook) ifFalse: [ self error: self class productNotInCatalogErrorDescription ].! !

!methodRemoval: Cart #assertBookIncludedInCatalog: stamp: 'MP 11/2/2021 00:39:23'!
assertBookIncludedInCatalog: aBook

	^ (catalog includesKey: aBook) ifFalse: [ self error: self class productNotInCatalogErrorDescription ].!
!Cart methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:39:35' prior: 50919727!
add: quantity of: product 
	
	self assertProductIncludedInCatalog: product.
	self assertQuantityIsPositive: quantity.

	contents add: product withOccurrences: quantity .

	totalPrice _ totalPrice + (self priceOf: product) * quantity.! !
!Cart methodsFor: 'assertions' stamp: 'MP 11/2/2021 00:39:46' prior: 50919753!
assertProductIncludedInCatalog: aProduct

	^ (catalog includesKey: aProduct) ifFalse: [ self error: self class productNotInCatalogErrorDescription ].! !
!Cart methodsFor: 'adding' stamp: 'MP 11/2/2021 00:39:55' prior: 50918824!
add: product 
	
	self add: 1 of: product.! !
!Cart methodsFor: 'testing' stamp: 'MP 11/2/2021 00:40:05' prior: 50915102!
includes: product 
	
	^contents includes: product.! !
!Cart methodsFor: 'adding - private' stamp: 'MP 11/2/2021 00:40:53'!
priceOf: product

	^ catalog at: product.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:40:54'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:40:54'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:43:31'!
checkout: aCart charging: aCreditCard
	
	self assertCartIsNotEmpty: aCart.

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:44:16'!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	aCreditCard isExpiredOn: aDate ifTrue: [ self error: self class expiredCardErrorDescription ].

	^ aCart totalPrice.
! !

!methodRemoval: Cashier #checkout:charging: stamp: 'MP 11/2/2021 00:44:19'!
checkout: aCart charging: aCreditCard
	
	self assertCartIsNotEmpty: aCart.

	^ aCart totalPrice.
!
!Cashier class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 00:44:36'!
expiredCardErrorDescription
	
	^ 'Cannot charge expired card'.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:44:48' prior: 50919835!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:44:58' prior: 50919855!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.

	^ aCart totalPrice.
! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:48:12'!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier checkout: cart charging: testObjectFactory expiredCard on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 00:48:17'!
ERROR!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:48:22'!
expiredCard
	self shouldBeImplemented.! !

!classDefinition: #Card category: 'TusLibros-It1' stamp: 'MP 11/2/2021 00:50:31'!
Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:50:22' prior: 50919892!
expiredCard
	
	^ Card expiringAt: nil.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:50:37' prior: 50919871!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier checkout: cart charging: testObjectFactory expiredCard on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 00:50:37'!
ERROR!
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 00:50:44'!
expiringAt: anUndefinedObject 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeExpiringAt: anUndefinedObject ! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 00:50:47' prior: 50919928!
expiringAt: anUndefinedObject 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"

	^self new initializeExpiringAt: anUndefinedObject ! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 00:50:54' prior: 50919937!
expiringAt: anUndefinedObject 

	^self new initializeExpiringAt: anUndefinedObject ! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 00:51:02' prior: 50919945!
expiringAt: anExpiryDate 

	^self new initializeExpiringAt: anExpiryDate ! !

!classDefinition: #Card category: 'TusLibros-It1' stamp: 'MP 11/2/2021 00:51:26'!
Object subclass: #Card
	instanceVariableNames: 'expirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Card methodsFor: 'no messages' stamp: 'MP 11/2/2021 00:51:25'!
initializeExpiringAt: anExpirationDate

	expirationDate _ anExpirationDate! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:51:31'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 00:51:31'!
ERROR!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 00:51:31'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:51:46' prior: 50919865!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
		(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].


	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:51:47' prior: 50920004!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].


	^ aCart totalPrice.
! !

!methodRemoval: Cashier #checkout: stamp: 'MP 11/2/2021 00:51:50'!
checkout: aCart 
	
	self assertCartIsNotEmpty: aCart.

	^ aCart totalPrice.
!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 00:51:52'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 00:51:52'!
ERROR!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 00:51:52'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 00:51:52'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 00:51:52'!
ERROR!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 00:51:52'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:52:27'!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.


	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:52:30' prior: 50920014!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].

	^ aCart totalPrice.
! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 00:52:46'!
today

	^ DateAndTime today.! !

Months!

September / 10!

September / 10!

September / 10 / 21!

September / 10 / 21!

September of: 2021!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:07:39' prior: 50920077!
today

	^ November / 2 / 2021.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:07:56' prior: 50919903!
expiredCard
	
	^ Card expiringAt: (September of: 2021).! !

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:08:33'!
ERROR!

aDate _ September / 10 / 2021.

anExpiryDate _ August of: 2021.

aDate > anExpiryDate!

aDate _ September / 10 / 2021.

anExpiryDate _ October of: 2021.

aDate > anExpiryDate!

aDate _ September / 10 / 2021.

anExpiryDate _ September of: 2021.

aDate > anExpiryDate!

aDate _ September / 10 / 2021.

anExpiryDate _ September of: 2021.

aDate >= anExpiryDate!

aDate _ September / 10 / 2021.

anExpiryDate _ September of: 2021.

aDate >= anExpiryDate!

aDate _ September / 10 / 2021.

anExpiryDate _ September of: 2021.

aDate > anExpiryDate!
!Card methodsFor: 'nil' stamp: 'MP 11/2/2021 01:10:31'!
isExpiredOn: aDate

	aDate > expirationDate ! !

!classDefinition: #Card category: 'TusLibros-It1' stamp: 'MP 11/2/2021 01:10:34'!
Object subclass: #Card
	instanceVariableNames: 'expirationDateOfMonth'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:34' prior: 50920113!
isExpiredOn: aDate

	aDate > expirationDateOfMonth ! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:34' prior: 50919963!
initializeExpiringAt: anExpirationDate

	expirationDateOfMonth _ anExpirationDate! !

!classDefinition: #Card category: 'TusLibros-It1' stamp: 'MP 11/2/2021 01:10:40'!
Object subclass: #Card
	instanceVariableNames: 'expirationMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It1'!
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:40' prior: 50920125!
isExpiredOn: aDate

	aDate > expirationMonthOfYear ! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:40' prior: 50920130!
initializeExpiringAt: anExpirationDate

	expirationMonthOfYear _ anExpirationDate! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:45' prior: 50920143!
isExpiredOn: aDate

	^aDate > expirationMonthOfYear ! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:49' prior: 50920154!
isExpiredOn: aDate

	^ aDate > expirationMonthOfYear ! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:52' prior: 50920159!
isExpiredOn: aDate

	^ aDate > expirationMonthOfYear! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:10:53' prior: 50920164!
isExpiredOn: aDate

	^ aDate > expirationMonthOfYear.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:10:55'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:10:55'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:11:44' prior: 50919908!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:12:50' prior: 50920207!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:12:56' prior: 50920226!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
			checkout: cart 
			charging: testObjectFactory expiredCard 
			on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:12:58' prior: 50920245!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:13:17' prior: 50920264!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self 
should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:13:18' prior: 50920283!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory today ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:13:32'!
fixedDate

	^ November / 2 / 2021.! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:13:32' prior: 50920302!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !

!methodRemoval: TestObjectFactory #today stamp: 'MP 11/2/2021 01:13:32'!
today

	^ November / 2 / 2021.!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:13:36'!
PASSED!

!methodRemoval: Cashier #checkout: stamp: 'MP 11/2/2021 01:13:54'!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.


	^ aCart totalPrice.
!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:14:02'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:16:32' prior: 50919186!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit equals: (cashier checkout: cart charging: testObjectFactory validCard on: testObjectFactory fixedDate ).! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:16:46'!
validCard
	
	^ Card expiringAt: (December of: 2021).! !

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:16:54'!
ERROR!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:16:54'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:16:54'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:16:54'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:16:54'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:16:58' prior: 50920390!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit equals: (cashier checkout: cart charging: testObjectFactory validCard on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:17:15' prior: 50920451!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit equals: (cashier checkout: cart charging: testObjectFactory validCard on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:17:29' prior: 50920472!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:17:52' prior: 50915610!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate )..! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:17:54' prior: 50920514!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:17:56' prior: 50920530!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:04' prior: 50920493!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:13' prior: 50915585!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: 1 of: testObjectFactory firstProductSoldByTheStore.
	
	self
		assert: testObjectFactory firstProductSoldByTheStorePrice
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:18' prior: 50915548!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [(cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ). ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:24' prior: 50920599!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:26' prior: 50920615!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [cashier 
				checkout: cart 
				charging: testObjectFactory validCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:30' prior: 50920630!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory validCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:49' prior: 50920584!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: 1 of: testObjectFactory firstProductSoldByTheStore.
	
	self
		assert: testObjectFactory firstProductSoldByTheStorePrice
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:52' prior: 50920546!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:18:55' prior: 50920562!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:19:00'!
PASSED!

----SNAPSHOT----(2 November 2021 01:19:03) CuisUniversity-4913.image priorSource: 18661997!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:25:51'!
test06

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory invalidNumberCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 01:31:07'!
invalidNumberCard
	
	^ Card withNumber: '4509790000001234' expiringAt: (December of: 2021).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 01:31:19' prior: 50920771!
invalidNumberCard
	
	^ Card withNumber: '450979000000' expiringAt: (December of: 2021).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 01:31:25' prior: 50920411!
validCard
	
	^ Card withNumber: '4509790000001234' expiringAt: (December of: 2021).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 01:31:31' prior: 50920090!
expiredCard
	
	^ Card withNumber: '4509790000001234' expiringAt: (September of: 2021).! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 01:32:16'!
withNumber: aCardNumber expiringAt: anExpiryDate 

	^self new initializeWithNumber: aCardNumber expiringAt: anExpiryDate ! !

!methodRemoval: Card class #expiringAt: stamp: 'MP 11/2/2021 01:32:19'!
expiringAt: anExpiryDate 

	^self new initializeExpiringAt: anExpiryDate !

!classDefinition: #Card category: 'TusLibros-It2' stamp: 'MP 11/2/2021 01:32:47'!
Object subclass: #Card
	instanceVariableNames: 'expirationMonthOfYear number'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:32:45'!
initializeWithNumber: aCardNumber expiringAt: anExpirationDate

	expirationMonthOfYear _ anExpirationDate.
	number _ aCardNumber.! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:36:16' prior: 50920814!
initializeWithNumber: aPAN expiringAt: anExpirationDate

	expirationMonthOfYear _ anExpirationDate.
	number _ aPAN.! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:36:22' prior: 50920821!
initializeWithNumber: aCardNumber expiringAt: anExpirationDate

	expirationMonthOfYear _ anExpirationDate.
	number _ aCardNumber.! !

!methodRemoval: Card #initializeExpiringAt: stamp: 'MP 11/2/2021 01:36:39'!
initializeExpiringAt: anExpirationDate

	expirationMonthOfYear _ anExpirationDate!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:36:41'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:36:41'!
FAILURE!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:36:41'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:39:09' prior: 50920067!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].
	(aCreditCard number length < 16) IfTrue: [ self error: self class ].

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:39:25' prior: 50920878!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].
	(aCreditCard number length < 16) ifTrue: [ self error: self class ].

	^ aCart totalPrice.
! !
!Cashier class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 01:39:49'!
invalidCardErrorDescription
	
	^ 'cannot charge a card with an invalid card number'.! !
!Cashier class methodsFor: 'error descriptions' stamp: 'MP 11/2/2021 01:39:55'!
invalidCardNumberErrorDescription
	
	^ 'cannot charge a card with an invalid card number'.! !

!methodRemoval: Cashier class #invalidCardErrorDescription stamp: 'MP 11/2/2021 01:39:56'!
invalidCardErrorDescription
	
	^ 'cannot charge a card with an invalid card number'.!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:40:16' prior: 50920890!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].
	(aCreditCard number length < 16) ifTrue: [ self error: self class invalidCardNumberErrorDescription ].

	^ aCart totalPrice.
! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:40:18'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:40:18'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:40:18'!
ERROR!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:40:18'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:40:18'!
ERROR!
!Card methodsFor: 'nil' stamp: 'MP 11/2/2021 01:40:35'!
number

	^ number! !
!Card methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:40:36' prior: 50920967!
number

	^ number.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:40:37'!
ERROR!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:40:37'!
ERROR!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:40:37'!
ERROR!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:40:37'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:40:37'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:40:45' prior: 50920662!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self
		assert: testObjectFactory firstProductSoldByTheStorePrice
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:41:00'!
ERROR!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:41:26' prior: 50920920!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].
	(aCreditCard number size < 16) ifTrue: [ self error: self class invalidCardNumberErrorDescription ].

	^ aCart totalPrice.
! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:41:29'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:41:46' prior: 50921027!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	(aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ].
	(aCreditCard number size < 16) ifTrue: [ self error: self class invalidCardNumberErrorDescription ].

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:43:21'!
assertCard: aCreditCard isNotExpiredOn: aDate

	^ (aCreditCard isExpiredOn: aDate) ifTrue: [ self error: self class expiredCardErrorDescription ]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:43:21' prior: 50921075!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	(aCreditCard number size < 16) ifTrue: [ self error: self class invalidCardNumberErrorDescription ].

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:43:57'!
assertCardNumberIsValid: aCreditCard

	^ (aCreditCard number size < 16) ifTrue: [ self error: self class invalidCardNumberErrorDescription ]! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:43:57' prior: 50921096!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard.

	^ aCart totalPrice.
! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:44:01'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:44:04'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:44:09'!
m1: aDate m2: aCreditCard

	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:44:09' prior: 50921115!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	self m1: aDate m2: aCreditCard.

	^ aCart totalPrice.
! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:44:13' prior: 50921202!
checkout: aCart charging: aCreditCard on: aDate
	
	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard.

	^ aCart totalPrice.
! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test01 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test02 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test03 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test04 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test05 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!testRun: #CheckoutTest #test06 stamp: 'MP 11/2/2021 01:44:15'!
PASSED!

!methodRemoval: Cashier #m1:m2: stamp: 'MP 11/2/2021 01:44:23'!
m1: aDate m2: aCreditCard

	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard!
!Cashier methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:44:38'!
m1: asdf m2: asd

	self.
! !

!methodRemoval: Cashier #m1:m2: stamp: 'MP 11/2/2021 01:45:37'!
m1: asdf m2: asd

	self.
!

----SNAPSHOT----(2 November 2021 01:46:10) CuisUniversity-4913.image priorSource: 18851140!

----SNAPSHOT----(2 November 2021 01:46:26) CuisUniversity-4913.image priorSource: 18867704!
!Cashier methodsFor: 'checkout' stamp: 'MP 11/2/2021 01:51:09' prior: 50921210!
checkout: aCart charging: aCreditCard on: aDate

	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard.

	^ aCart totalPrice.
! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:57:05'!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory invalidNumberCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:57:22'!
test01CannotCheckoutWithEmptyCart

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory validCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].! !

!methodRemoval: CheckoutTest #test01 stamp: 'MP 11/2/2021 01:57:22'!
test01

	| cart cashier |
	cart _ testObjectFactory createCart. 
	cashier _ testObjectFactory createCashier.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory validCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anError | self assert: Cashier emptyCartErrorDescription equals: anError messageText ].!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:58:14'!
test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self
		assert: testObjectFactory firstProductSoldByTheStorePrice
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!methodRemoval: CheckoutTest #test02 stamp: 'MP 11/2/2021 01:58:14'!
test02

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self
		assert: testObjectFactory firstProductSoldByTheStorePrice
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:58:42'!
test03CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!methodRemoval: CheckoutTest #test03 stamp: 'MP 11/2/2021 01:58:42'!
test03

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:59:20'!
test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!methodRemoval: CheckoutTest #test03CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 01:59:20'!
test03CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices

	| cart cashier quantity |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	
	self 
		assert: (quantity * testObjectFactory firstProductSoldByTheStorePrice)
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:59:31'!
test04CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!methodRemoval: CheckoutTest #test04 stamp: 'MP 11/2/2021 01:59:31'!
test04

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 01:59:35'!
test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).! !

!methodRemoval: CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 01:59:35'!
test04CheckoutOfCartWithMultipleItemsReturnsAReceiptWithASumOfTheirPrices

	| cart cashier quantity expectedRecepit |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	quantity _ 5.
	
	cart add: quantity of: testObjectFactory firstProductSoldByTheStore.
	cart add: testObjectFactory secondProductSoldByTheStore.
	
	expectedRecepit _
		(quantity * testObjectFactory firstProductSoldByTheStorePrice) +
		(testObjectFactory secondProductSoldByTheStorePrice).
	
	self 
		assert: expectedRecepit
		equals: (cashier 
			checkout: cart 
			charging: testObjectFactory validCard 
			on: testObjectFactory fixedDate).!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:00:16'!
test05CannotCheckoutExpiredCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test05 stamp: 'MP 11/2/2021 02:00:16'!
test05

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:00:21'!
test05CannotCheckoutWithExpiredCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test05CannotCheckoutExpiredCard stamp: 'MP 11/2/2021 02:00:21'!
test05CannotCheckoutExpiredCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory expiredCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier expiredCardErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:00:29'!
test06CannotCheckoutWithInvalidNumberCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory invalidNumberCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test06 stamp: 'MP 11/2/2021 02:00:29'!
test06

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory invalidNumberCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:02:51' prior: 50921282!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:06:22'!
cardWithoutFunds
	
	^ Card withNumber: self cardNumberWithoutFunds expiringAt: (December of: 2021).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:06:38'!
cardNumberWithoutFunds
	
	^ '4509790000006789'! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:08:03' prior: 50915453!
createCashier

	^ Cashier withMerchantProcessorXX: self defaultSimulatedMP.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:08:07' prior: 50921662!
createCashier

	^ Cashier withMerchantProcessorXX: self defaultSimulatedMP.! !

!classDefinition: #SimulatedMP category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:12:58'!
Object subclass: #SimulatedMP
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:12:54'!
defaultSimulatedMP

	^ SimulatedMP .! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:15:38' prior: 50921681!
defaultSimulatedMP

	^ SimulatedMP withNoFundsCard: self cardWithoutFundsNumber.
! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:15:51'!
cardWithoutFundsNumber
	
	^ '4509790000006789'! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:15:51' prior: 50921651!
cardWithoutFunds
	
	^ Card withNumber: self cardWithoutFundsNumber expiringAt: (December of: 2021).! !

!methodRemoval: TestObjectFactory #cardNumberWithoutFunds stamp: 'MP 11/2/2021 02:15:51'!
cardNumberWithoutFunds
	
	^ '4509790000006789'!

!classDefinition: 'SimulatedMP class' category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:16:20'!
SimulatedMP class
	instanceVariableNames: 'noFundsCardNumber'!
!SimulatedMP class methodsFor: 'nil' stamp: 'MP 11/2/2021 02:16:19'!
withNoFundsCard: aNoFundsCardNumber

	noFundsCardNumber _ aNoFundsCardNumber! !
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:16:42' prior: 50921711!
withNoFundsCard: aNoFundsCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber.! !

!classDefinition: #SimulatedMP category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:17:05'!
Object subclass: #SimulatedMP
	instanceVariableNames: 'noFundsCardNumber'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!
!SimulatedMP methodsFor: 'nil' stamp: 'MP 11/2/2021 02:17:04'!
initializeWithNoFundsCard: aNoFundsCardNumber

	noFundsCardNumber _ aNoFundsCardNumber! !
!SimulatedMP methodsFor: 'nil' stamp: 'MP 11/2/2021 02:19:44'!
charge: anAmount to: aCreditCard

	aCreditCard number = noFundsCardNumber ifTrue: [ self error: self class cardWithoutFundsErrorDescription ]! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:19:54' prior: 50921634!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier invalidCardNumberErrorDescription equals: anException messageText ].! !
!Cashier methodsFor: 'checkout' stamp: 'MP 11/2/2021 02:20:22' prior: 50921273!
checkout: aCart charging: aCreditCard on: aDate

	| totalPrice |
	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard.

	totalPrice _ aCart totalPrice.
	
	
	
	^ totalPrice
! !

Object subclass: #Cashier
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!

!classDefinition: #Cashier category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:20:34'!
Object subclass: #Cashier
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:20:49'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:20:49'!
ERROR!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:20:55'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:21:02'!
withMerchantProcessorXX: aSimulatedMP 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithMerchantProcessorXX: aSimulatedMP ! !
!Cashier class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:21:14' prior: 50921832!
withMerchantProcessorXX: aMerchantProcessor 

	^self new initializeWithMerchantProcessorXX: aMerchantProcessor ! !

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:21:15'!
ERROR!

!classDefinition: #Cashier category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:21:28'!
Object subclass: #Cashier
	instanceVariableNames: 'merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!
!Cashier methodsFor: 'initialization' stamp: 'MP 11/2/2021 02:21:28'!
initializeWithMerchantProcessorXX: aMerchantProcessor 
	self shouldBeImplemented.
	merchantProcessor := aMerchantProcessor.! !
!Cashier methodsFor: 'initialization' stamp: 'MP 11/2/2021 02:21:31' prior: 50921859!
initializeWithMerchantProcessorXX: aMerchantProcessor 

	merchantProcessor := aMerchantProcessor.! !
!Cashier methodsFor: 'initialization' stamp: 'MP 11/2/2021 02:21:41' prior: 50921866!
initializeWithMerchantProcessorXX: aMerchantProcessor 

	merchantProcessor _ aMerchantProcessor.! !

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:21:42'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:21:45'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:21:46'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:21:46'!
FAILURE!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:21:46'!
FAILURE!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:22:31' prior: 50921743!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: Cashier cardWithNoFundsErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:23:45' prior: 50921934!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP  equals: anException messageText ].! !
!SimulatedMP class methodsFor: 'nil' stamp: 'MP 11/2/2021 02:24:33'!
cardWithoutFundsErrorDescription

	^ 'card has no funds'! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:24:42' prior: 50921952!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:24:43'!
FAILURE!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:25:06' prior: 50921973!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	cashier 
		checkout: cart 
		charging: testObjectFactory cardWithoutFunds
		on: testObjectFactory fixedDate.
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:25:11' prior: 50921993!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	cashier 
		checkout: cart 
		charging: testObjectFactory cardWithoutFunds
		on: testObjectFactory fixedDate.
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:25:22' prior: 50922015!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	cashier 
		checkout: cart 
		charging: testObjectFactory cardWithoutFunds
		on: testObjectFactory fixedDate.
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !
!Cashier methodsFor: 'checkout' stamp: 'MP 11/2/2021 02:26:00' prior: 50921761!
checkout: aCart charging: aCreditCard on: aDate

	| totalPrice |
	self assertCartIsNotEmpty: aCart.
	self assertCard: aCreditCard isNotExpiredOn: aDate.
	self assertCardNumberIsValid: aCreditCard.

	totalPrice _ aCart totalPrice.
	
	merchantProcessor charge: totalPrice to: aCreditCard.
	
	^ totalPrice
! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:26:01'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:26:01'!
ERROR!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:26:01'!
ERROR!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:26:11' prior: 50922037!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:26:12'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:26:14'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:26:14'!
PASSED!
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:27:21'!
test08

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory startWizard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:27:28' prior: 50922185!
test08

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory stolenCard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:27:51'!
stolenCard
	
	^ Card withNumber: self stolenCardNumber expiringAt: (December of: 2021).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:28:04'!
stolenCardNumber
	
	^ '450979000000000'! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:28:25' prior: 50921686!
defaultSimulatedMP

	^ SimulatedMP
		withNoFundsCard: self cardWithoutFundsNumber
		withStolenCard: self stolenCardNumber.
! !

!classDefinition: #SimulatedMP category: 'TusLibros-It2' stamp: 'MP 11/2/2021 02:28:49'!
Object subclass: #SimulatedMP
	instanceVariableNames: 'noFundsCardNumber stolenCardNumber'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-It2'!
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:28:47'!
initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber

	noFundsCardNumber _ aNoFundsCardNumber.
	stolenCardNumber _ aStolenCardNumber.! !

!methodRemoval: SimulatedMP #initializeWithNoFundsCard: stamp: 'MP 11/2/2021 02:28:51'!
initializeWithNoFundsCard: aNoFundsCardNumber

	noFundsCardNumber _ aNoFundsCardNumber!
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:29:11'!
withNoFundsCard: aNoFundsCardNumber stolenCardNumber: aStolenCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber .! !

!methodRemoval: SimulatedMP class #withNoFundsCard: stamp: 'MP 11/2/2021 02:29:13'!
withNoFundsCard: aNoFundsCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber.!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:29:16'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:29:16'!
ERROR!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:29:16'!
ERROR!
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:29:21' prior: 50922260!
withNoFundsCard: aNoFundsCardNumber stolenCardNumber: aStolenCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:29:22'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:29:22'!
ERROR!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:29:23'!
ERROR!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:29:25'!
ERROR!
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:29:44' prior: 50922246!
initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber

	noFundsCardNumber _ aNoFundsCardNumber.
	stolenCardNumber _ aStolenCardNumber.! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:30:11' prior: 50922231!
defaultSimulatedMP

	^ SimulatedMP
		withNoFundsCard: self cardWithoutFundsNumber
		stolenCard: self stolenCardNumber.
! !
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:30:27'!
withNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber.! !

!methodRemoval: SimulatedMP class #withNoFundsCard:stolenCardNumber: stamp: 'MP 11/2/2021 02:30:27'!
withNoFundsCard: aNoFundsCardNumber stolenCardNumber: aStolenCardNumber

	^self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber.!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:30:36'!
PASSED!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:30:36'!
ERROR!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:30:36'!
ERROR!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:30:44'!
PASSED!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:30:44'!
ERROR!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:30:44'!
ERROR!
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:30:53'!
stolenCardErrorDescription
	self shouldBeImplemented.! !
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:31:00' prior: 50922517!
stolenCardErrorDescription
	
	^ 'stolen card'! !
!SimulatedMP class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:31:01' prior: 50922522!
stolenCardErrorDescription
	
	^ 'stolen card'.! !

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:31:02'!
FAILURE!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:31:21'!
FAILURE!
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:31:46' prior: 50922226!
stolenCardNumber
	
	^ '45097900000000'! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:31:47'!
PASSED!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:31:47'!
FAILURE!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:31:47'!
FAILURE!
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:32:02' prior: 50922536!
stolenCardNumber
	
	^ '4509790000000000'! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:32:02'!
PASSED!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:32:02'!
FAILURE!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:32:02'!
FAILURE!
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:32:38' prior: 50921735!
charge: anAmount to: aCreditCard

	aCreditCard number = noFundsCardNumber ifTrue: [ self error: self class cardWithoutFundsErrorDescription ].
	aCreditCard number = stolenCardNumber ifTrue: [ self error: self class stolenCardErrorDescription ].! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test07 stamp: 'MP 11/2/2021 02:32:39'!
PASSED!

!testRun: #CheckoutTest #test08 stamp: 'MP 11/2/2021 02:32:39'!
PASSED!
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:33:06'!
assertCardHasFunds: aCreditCard

	^ aCreditCard number = noFundsCardNumber ifTrue: [ self error: self class cardWithoutFundsErrorDescription ]! !
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:33:06' prior: 50922647!
charge: anAmount to: aCreditCard

	self assertCardHasFunds: aCreditCard.
	aCreditCard number = stolenCardNumber ifTrue: [ self error: self class stolenCardErrorDescription ].! !
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:33:15'!
assertCardIsntStolen: aCreditCard

	^ aCreditCard number = stolenCardNumber ifTrue: [ self error: self class stolenCardErrorDescription ]! !
!SimulatedMP methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:33:15' prior: 50922714!
charge: anAmount to: aCreditCard

	self assertCardHasFunds: aCreditCard.
	self assertCardIsntStolen: aCreditCard.! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:03'!
notExpiredMonthOfYear

	^ December of: 2021! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:03' prior: 50922220!
stolenCard
	
	^ Card withNumber: self stolenCardNumber expiringAt: (self notExpiredMonthOfYear).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:03' prior: 50920783!
validCard
	
	^ Card withNumber: '4509790000001234' expiringAt: (self notExpiredMonthOfYear).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:03' prior: 50920777!
invalidNumberCard
	
	^ Card withNumber: '450979000000' expiringAt: (self notExpiredMonthOfYear).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:03' prior: 50921696!
cardWithoutFunds
	
	^ Card withNumber: self cardWithoutFundsNumber expiringAt: (self notExpiredMonthOfYear).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:10'!
expiredMonthOfYear

	^ September of: 2021! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:10' prior: 50920789!
expiredCard
	
	^ Card withNumber: '4509790000001234' expiringAt: (self expiredMonthOfYear).! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:15' prior: 50922771!
expiredCard
	
	^ Card withNumber: '4509790000001234' expiringAt: self expiredMonthOfYear.! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:21' prior: 50922760!
cardWithoutFunds
	
	^ Card withNumber: self cardWithoutFundsNumber expiringAt: self notExpiredMonthOfYear.! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:26' prior: 50922754!
invalidNumberCard
	
	^ Card withNumber: '450979000000' expiringAt: self notExpiredMonthOfYear.! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:31' prior: 50922742!
stolenCard
	
	^ Card withNumber: self stolenCardNumber expiringAt: self notExpiredMonthOfYear.! !
!TestObjectFactory methodsFor: 'cards' stamp: 'MP 11/2/2021 02:36:36' prior: 50922748!
validCard
	
	^ Card withNumber: '4509790000001234' expiringAt: self notExpiredMonthOfYear.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:38:08'!
test07CannotCheckoutCardWithoutFunds

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test07 stamp: 'MP 11/2/2021 02:38:08'!
test07

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:38:14'!
test08CannotcheckoutWithStolenCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory stolenCard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test08 stamp: 'MP 11/2/2021 02:38:14'!
test08

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory stolenCard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:38:20'!
test07CannotCheckoutWithCardWithoutFunds

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test07CannotCheckoutCardWithoutFunds stamp: 'MP 11/2/2021 02:38:20'!
test07CannotCheckoutCardWithoutFunds

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory cardWithoutFunds
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP cardWithoutFundsErrorDescription equals: anException messageText ].!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:38:23'!
test08CannotCheckoutWithStolenCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory stolenCard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].! !

!methodRemoval: CheckoutTest #test08CannotcheckoutWithStolenCard stamp: 'MP 11/2/2021 02:38:23'!
test08CannotcheckoutWithStolenCard

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self should: [ cashier 
				checkout: cart 
				charging: testObjectFactory stolenCard
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: SimulatedMP stolenCardErrorDescription equals: anException messageText ].!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:38:30'!
PASSED!

----SNAPSHOT----(2 November 2021 02:38:33) CuisUniversity-4913.image priorSource: 18867797!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:41:55'!
assertCheckingOutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:41:58' prior: 50923005!
assertCheckingOutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:42:36' prior: 50921556!
test05CannotCheckoutWithExpiredCard

	
	self assertCheckingOutCharging: testObjectFactory expiredCard raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:42:43' prior: 50923043!
test05CannotCheckoutWithExpiredCard
	
	self assertCheckingOutCharging: testObjectFactory expiredCard raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:20'!
assertCheckoutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:43:20' prior: 50923051!
test05CannotCheckoutWithExpiredCard
	
	self assertCheckoutCharging: testObjectFactory expiredCard raises: Cashier expiredCardErrorDescription.! !

!methodRemoval: CheckoutTest #assertCheckingOutCharging:raises: stamp: 'MP 11/2/2021 02:43:20'!
assertCheckingOutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cashier _ testObjectFactory createCashier.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:29' prior: 50923077!
test05CannotCheckoutWithExpiredCard
	
	self 
		assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:31' prior: 50923103!
test05CannotCheckoutWithExpiredCard
	
	self assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:46' prior: 50923111!
test05CannotCheckoutWithExpiredCard
	
	self assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:49' prior: 50923119!
test05CannotCheckoutWithExpiredCard
	
	self
		assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:50' prior: 50923127!
test05CannotCheckoutWithExpiredCard
	
	self
assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:43:52' prior: 50923135!
test05CannotCheckoutWithExpiredCard
	
	self assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:44:10' prior: 50921595!
test06CannotCheckoutWithInvalidNumberCard

	self assertCheckoutCharging: testObjectFactory invalidNumberCard
		raises: Cashier invalidCardNumberErrorDescription! !

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:44:11'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:44:11'!
PASSED!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:44:32' prior: 50922876!
test07CannotCheckoutWithCardWithoutFunds

	self assertCheckoutCharging: testObjectFactory cardWithoutFunds
		raises: SimulatedMP cardWithoutFundsErrorDescription
! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:44:47' prior: 50922913!
test08CannotCheckoutWithStolenCard

	self assertCheckoutCharging: testObjectFactory stolenCard
		raises: SimulatedMP stolenCardErrorDescription.! !

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:44:48'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:44:49'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:44:49'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:44:49'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:44:49'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:44:49'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:44:49'!
PASSED!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:44:52' prior: 50923213!
test07CannotCheckoutWithCardWithoutFunds

	self assertCheckoutCharging: testObjectFactory cardWithoutFunds
		raises: SimulatedMP cardWithoutFundsErrorDescription.
! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:44:54' prior: 50923151!
test06CannotCheckoutWithInvalidNumberCard

	self assertCheckoutCharging: testObjectFactory invalidNumberCard
		raises: Cashier invalidCardNumberErrorDescription.! !

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:44:56'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:44:56'!
PASSED!
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:45:57'!
assertCashier: aCashier checkout: aCart charging: aCard raises: anErrorMessage
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ aCashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:47:18' prior: 50923058!
assertCheckoutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.

	cashier _ testObjectFactory createCashier.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:47:47'!
assertCheckout: aCart charging: aCard raises: anErrorMessage
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ | cashier | cashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:47:58' prior: 50923366!
assertCheckoutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	cashier _ testObjectFactory createCashier.

	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:48:16' prior: 50923385!
assertCheckout: aCart charging: aCard raises: anErrorMessage
	
		| cashier |
	cashier _ testObjectFactory createCashier.

	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:48:19' prior: 50923419!
assertCheckout: aCart charging: aCard raises: anErrorMessage
	
	| cashier |
	cashier _ testObjectFactory createCashier.

	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !
!CheckoutTest methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:48:21' prior: 50923435!
assertCheckout: aCart charging: aCard raises: anErrorMessage
	
	| cashier |
	cashier _ testObjectFactory createCashier.
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].! !

!methodRemoval: CheckoutTest #assertCheckoutCharging:raises: stamp: 'MP 11/2/2021 02:48:57'!
assertCheckoutCharging: aCard raises: anErrorMessage

	| cart cashier |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	cashier _ testObjectFactory createCashier.

	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ cashier 
				checkout: cart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].!
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:49:38' prior: 50921300!
test01CannotCheckoutWithEmptyCart

	| cart |
	cart _ testObjectFactory createCart. 

	self assertCheckout: cart charging: testObjectFactory validCard raises: Cashier emptyCartErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:49:55' prior: 50923486!
test01CannotCheckoutWithEmptyCart

	

	self assertCheckout: testObjectFactory createCart
		charging: testObjectFactory validCard
		raises: Cashier emptyCartErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:49:58' prior: 50923495!
test01CannotCheckoutWithEmptyCart


	self assertCheckout: testObjectFactory createCart
		charging: testObjectFactory validCard
		raises: Cashier emptyCartErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:49:58' prior: 50923504!
test01CannotCheckoutWithEmptyCart

	self assertCheckout: testObjectFactory createCart
		charging: testObjectFactory validCard
		raises: Cashier emptyCartErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:50:16' prior: 50923143!
test05CannotCheckoutWithExpiredCard
	
	
	| cart |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self assertCheckoutCharging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:50:22' prior: 50923521!
test05CannotCheckoutWithExpiredCard
	
	
	| cart |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self assertCheckout: cart charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:50:43' prior: 50923532!
test05CannotCheckoutWithExpiredCard
	
	| cart |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self assertCheckout: cart charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:50:45' prior: 50923543!
test05CannotCheckoutWithExpiredCard

	| cart |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.
	
	self assertCheckout: cart charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:50:49' prior: 50923554!
test05CannotCheckoutWithExpiredCard

	| cart |
	cart _ testObjectFactory createCart.
	cart add: testObjectFactory firstProductSoldByTheStore.

	self assertCheckout: cart charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!TestObjectFactory methodsFor: 'store creation' stamp: 'MP 11/2/2021 02:51:36'!
createCartWithSingleProduct

	^self createCart
		add: self firstProductSoldByTheStore;
		yourself.! !
!TestObjectFactory methodsFor: 'store creation' stamp: 'MP 11/2/2021 02:51:39' prior: 50923576!
createCartWithSingleProduct

	^ self createCart
		add: self firstProductSoldByTheStore;
		yourself.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:01' prior: 50923565!
test05CannotCheckoutWithExpiredCard

	self assertCheckout: testObjectFactory createCartWithSingleProduct charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:02' prior: 50923589!
test05CannotCheckoutWithExpiredCard

	self assertCheckout: testObjectFactory createCartWithSingleProduct 
		charging: testObjectFactory expiredCard
		raises: Cashier expiredCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:16' prior: 50923290!
test06CannotCheckoutWithInvalidNumberCard

	self assertCheckout: testObjectFactory createCartWithSingleProduct 
		charging: testObjectFactory invalidNumberCard
		raises: Cashier invalidCardNumberErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:24' prior: 50923282!
test07CannotCheckoutWithCardWithoutFunds

	self assertCheckout: testObjectFactory createCartWithSingleProduct 
		charging: testObjectFactory cardWithoutFunds
		raises: SimulatedMP cardWithoutFundsErrorDescription.
! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:25' prior: 50923617!
test07CannotCheckoutWithCardWithoutFunds

	self assertCheckout: testObjectFactory createCartWithSingleProduct
		charging: testObjectFactory cardWithoutFunds
		raises: SimulatedMP cardWithoutFundsErrorDescription.
! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:37' prior: 50923221!
test08CannotCheckoutWithStolenCard

	self assertCheckout: testObjectFactory createCartWithSingleProduct 
		charging: testObjectFactory stolenCard
		raises: SimulatedMP stolenCardErrorDescription.! !
!CheckoutTest methodsFor: 'tests' stamp: 'MP 11/2/2021 02:52:39' prior: 50923637!
test08CannotCheckoutWithStolenCard

	self assertCheckout: testObjectFactory createCartWithSingleProduct
		charging: testObjectFactory stolenCard
		raises: SimulatedMP stolenCardErrorDescription.! !

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:52:40'!
PASSED!

----SNAPSHOT----(2 November 2021 02:52:43) CuisUniversity-4913.image priorSource: 18923259!

!methodRemoval: CheckoutTest #assertCashier:checkout:charging:raises: stamp: 'MP 11/2/2021 02:52:57'!
assertCashier: aCashier checkout: aCart charging: aCard raises: anErrorMessage
	
	"TODO: assert de cosas que no tienen que pasar"
	self should: [ aCashier 
				checkout: aCart 
				charging: aCard 
				on: testObjectFactory fixedDate ]
		raise: Error - MessageNotUnderstood
		withExceptionDo: [ :anException | self assert: anErrorMessage equals: anException messageText ].!
!Cashier methodsFor: 'initialization' stamp: 'MP 11/2/2021 02:53:45'!
initializeWithMerchantProcessor: aMerchantProcessor 

	merchantProcessor _ aMerchantProcessor.! !
!Cashier class methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:53:45' prior: 50921842!
withMerchantProcessorXX: aMerchantProcessor 

	^self new initializeWithMerchantProcessor: aMerchantProcessor ! !

!methodRemoval: Cashier #initializeWithMerchantProcessorXX: stamp: 'MP 11/2/2021 02:53:45'!
initializeWithMerchantProcessorXX: aMerchantProcessor 

	merchantProcessor _ aMerchantProcessor.!
!Cashier class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:54:11'!
withMerchantProcessor: aMerchantProcessor 

	^self new initializeWithMerchantProcessor: aMerchantProcessor ! !
!TestObjectFactory methodsFor: 'as yet unclassified' stamp: 'MP 11/2/2021 02:54:11' prior: 50921668!
createCashier

	^ Cashier withMerchantProcessor: self defaultSimulatedMP.! !

!methodRemoval: Cashier class #withMerchantProcessorXX: stamp: 'MP 11/2/2021 02:54:11'!
withMerchantProcessorXX: aMerchantProcessor 

	^self new initializeWithMerchantProcessor: aMerchantProcessor !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:55:31' prior: 50920795!
withNumber: aCardNumber expiringAt: anExpiryDate 

	^ self new initializeWithNumber: aCardNumber expiringAt: anExpiryDate .! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:55:32' prior: 50923764!
withNumber: aCardNumber expiringAt: anExpiryDate 

	^ self new initializeWithNumber: aCardNumber expiringAt: anExpiryDate.! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:55:36' prior: 50923771!
withNumber: aCardNumber expiringAt: anExpirationDAte 

	^ self new initializeWithNumber: aCardNumber expiringAt: anExpirationDAte.! !
!Card class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:55:39' prior: 50923778!
withNumber: aCardNumber expiringAt: anExpirationDate 

	^ self new initializeWithNumber: aCardNumber expiringAt: anExpirationDate.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:55:41'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:55:41'!
PASSED!
!Cart class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:55:49' prior: 50915124!
acceptingProductsFrom: aCatalog
	
	^ self new initializeWith: aCatalog.! !
!Cashier methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:56:54'!
validCardNumberSize

	^ 16! !
!Cashier methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:56:54' prior: 50921107!
assertCardNumberIsValid: aCreditCard

	^ (aCreditCard number size < self validCardNumberSize) ifTrue: [ self error: self class invalidCardNumberErrorDescription ]! !
!Cashier methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:57:21' prior: 50923853!
assertCardNumberIsValid: aCreditCard

	^ (aCreditCard number size ~= self validCardNumberSize) ifTrue: [ self error: self class invalidCardNumberErrorDescription ]! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test02CartWithABookShouldNotBeEmpty stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test03CartIncludesBookAfterAdding stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test04CantAddBookNotIncludedInCatalog stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test05CartIncludesAllOccurrencesOfBookAfterAdding stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test06CantAddBookWithZeroQuantity stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CartTest #test07CantAddBookWithNegativeQuantity stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test01CannotCheckoutWithEmptyCart stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test02CheckoutOfCartWithSingleItemReturnsReceiptOfItsPrice stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test03CheckoutOfCartWithItemWithMultipleOcurrencesReturnsRecepitOfItsTotalPrice stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test04CheckoutOfCartWithMultipleItemsReturnsReceiptWithASumOfTheirPrices stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test05CannotCheckoutWithExpiredCard stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test06CannotCheckoutWithInvalidNumberCard stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test07CannotCheckoutWithCardWithoutFunds stamp: 'MP 11/2/2021 02:57:22'!
PASSED!

!testRun: #CheckoutTest #test08CannotCheckoutWithStolenCard stamp: 'MP 11/2/2021 02:57:22'!
PASSED!
!SimulatedMP methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:58:50'!
hasNoFunds: aCreditCard

	^ aCreditCard number = noFundsCardNumber! !
!SimulatedMP methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:58:50' prior: 50922706!
assertCardHasFunds: aCreditCard

	^ (self hasNoFunds: aCreditCard) ifTrue: [ self error: self class cardWithoutFundsErrorDescription ]! !
!SimulatedMP methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:59:09'!
isStolen: aCreditCard

	^ aCreditCard number = stolenCardNumber! !
!SimulatedMP methodsFor: 'assertions' stamp: 'MP 11/2/2021 02:59:09' prior: 50922723!
assertCardIsntStolen: aCreditCard

	^ (self isStolen: aCreditCard) ifTrue: [ self error: self class stolenCardErrorDescription ]! !
!SimulatedMP class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 02:59:32' prior: 50922399!
withNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber

	^ self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber.! !

----SNAPSHOT----(2 November 2021 02:59:42) CuisUniversity-4913.image priorSource: 18945847!
!SimulatedMP class methodsFor: 'instance creation' stamp: 'MP 11/2/2021 03:00:18' prior: 50923944!
withNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber

	^ self new initializeWithNoFundsCard: aNoFundsCardNumber stolenCard: aStolenCardNumber.! !

----SNAPSHOT----(2 November 2021 03:01:28) CuisUniversity-4913.image priorSource: 18953630!